{"version":3,"sources":["../../../src/tasks/Publish/prepare-package.js"],"names":["preparePackage","pkg","pkgPath","npmClient","tarballName","pkgTarballFilename","join","pkgTempDir","force"],"mappings":";;;;;;AAAA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;kBAEe,eAAeA,cAAf,CAA8BC,GAA9B,EAAmCC,OAAnC,EAA4C;AACzD,QAAMC,YAAY,MAAM,6BAAxB;AACA,QAAMC,cAAc,MAAM,8BAAeH,GAAf,CAA1B;AACA,QAAMI,qBAAqB,eAAKC,IAAL,CAAUJ,OAAV,EAAmBE,WAAnB,CAA3B;AACA,QAAMG,aAAa,MAAM,0BAAWN,GAAX,CAAzB;AACA,QAAM,6BAAe,GAAEE,SAAU,OAA3B,EAAmCD,OAAnC,CAAN;AACA,QAAM,mBAAK,GAAEK,UAAW,KAAlB,EAAwB,EAAEC,OAAO,IAAT,EAAxB,CAAN;AACA,QAAM,uBAAQD,UAAR,CAAN;AACA,QAAM,8BAAeF,kBAAf,EAAmCE,UAAnC,CAAN;AACA,QAAM,mBAAIF,kBAAJ,CAAN;AACD,C","file":"prepare-package.js","sourcesContent":["import path from 'path';\nimport del from 'del';\nimport makeDir from 'make-dir';\nimport execLikeShell from './exec-like-shell';\nimport extractTarball from './extract-tarball';\nimport getNpmClient from './get-npm-client';\nimport getTarballName from './get-tarball-name';\nimport getTempDir from './get-temp-dir';\n\nexport default async function preparePackage(pkg, pkgPath) {\n  const npmClient = await getNpmClient();\n  const tarballName = await getTarballName(pkg);\n  const pkgTarballFilename = path.join(pkgPath, tarballName);\n  const pkgTempDir = await getTempDir(pkg);\n  await execLikeShell(`${npmClient} pack`, pkgPath);\n  await del(`${pkgTempDir}/**`, { force: true });\n  await makeDir(pkgTempDir);\n  await extractTarball(pkgTarballFilename, pkgTempDir);\n  await del(pkgTarballFilename);\n}\n"]}